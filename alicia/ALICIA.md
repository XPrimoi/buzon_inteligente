# Repositorio de Alicia

Preséntase a captura do deseño de Fritzing dos nodos IoT _Digital IR Receiver_ e _Digital IR Transmitter_, cuxa implementación atópase en p2/ir_mqtt.ino. O ficheiro implementa un nodo ESP32 que emite pulsos IR no pin 5 e le o receptor no pin 4, conectándose a Wi‑Fi e a un broker MQTT para publicar lecturas e eventos.

Cando o usuario pulsa o botón de introducir carta en FlowFuse, publícase no topic "NAPIoT2025/buzonInteligente/ir/event", o nodo ESP32 recibe esa mensaxe, incrementa cartaCount e publica unha mensaxe de estado en "NAPIoT2025/buzonInteligente/ir/status", que é a que se mostra no campo de texto do dashboard a hora da última carta e número de cartas introducidas. Ademais, o propio nodo publica cada 2 s a lectura do receptor IR ao mesmo topic "NAPIoT2025/buzonInteligente/ir/event", polo que tanto as mensaxes xeradas polo botón de FlowFuse como as lecturas periódicas poden disparar o procesado local e a actualización do contador.



_Here is the Fritzing capture of the IoT nodes Digital IR Receiver and Digital IR Transmitter; their implementation is in p2/ir_mqtt.ino. The file implements an ESP32 node that emits IR pulses on pin 5 and reads the receiver on pin 4, connecting to Wi‑Fi and an MQTT broker to publish readings and events.

When the user presses the _Insert letter_ button in FlowFuse, a message is published to the topic "NAPIoT2025/buzonInteligente/ir/event". The ESP32 node receives that message, increments cartaCount, and publishes a status message to "NAPIoT2025/buzonInteligente/ir/status", which is shown in the dashboard text field as the time of the last letter and the number of letters inserted. Additionally, the node itself publishes the IR receiver reading every 2 seconds to the same topic "NAPIoT2025/buzonInteligente/ir/event", so both the messages generated by the FlowFuse button and the periodic readings can trigger local processing and update the counter._



